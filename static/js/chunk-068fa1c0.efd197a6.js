(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-068fa1c0"],{5391:function(e,t,r){"use strict";r("7e0d")},"7bf0":function(e,t,r){"use strict";r.r(t);var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-box"},[r("el-form",{ref:"myform",staticClass:"my-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"广告封面",prop:"imgurl"}},[r("el-upload",{attrs:{action:e.$store.state.user.beseFile,"list-type":"picture-card","on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"file-list":e.fileList,limit:1}},[r("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",height:"100%"},attrs:{slot:"trigger"},slot:"trigger"},[r("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"80px"}}),r("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"14px","margin-top":"10px"}},[e._v("添加封面")])])])],1),r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"跳转小程序链接",prop:"gourl"}},[r("el-input",{attrs:{placeholder:"请输入跳转小程序链接"},model:{value:e.ruleForm.gourl,callback:function(t){e.$set(e.ruleForm,"gourl",t)},expression:"ruleForm.gourl"}})],1),r("el-form-item",{attrs:{label:"显示位置",prop:"channelname",rules:[{required:!0,message:"请选择显示位置",trigger:"blur"}]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择显示位置"},model:{value:e.ruleForm.channelname,callback:function(t){e.$set(e.ruleForm,"channelname",t)},expression:"ruleForm.channelname"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),r("el-form-item",[r("div",{staticClass:"but-b"},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("myform")}}},[e._v("发布")])],1)])],1)],1)},i=[],n=r("5530"),a=r("c7eb"),o=r("1da1"),s=r("c24f"),u={components:{},data:function(){var e=function(e,t,r){""===t||void 0===t?r(new Error("请上传封面")):r()};return{options:[{name:"首页Banner",value:"index"},{name:"走进石岩",value:"zoujinshiyan"}],imgdialogVisible:!1,fileList:[],validateImg:e,dialogImageUrl:"",editflag:!1,containertext:"",loading:!1,ruleForm:{gourl:"",title:"",channelname:"",imgurl:""},rules:{title:[{required:!0,message:"请选择标题",trigger:"blur"}],gourl:[{required:!0,message:"请填写跳转路径",trigger:"change"}],imgurl:[{required:!0,trigger:"change",validator:e}]}}},mounted:function(){if(this.$route.params){var e=this.$route.params,t=e.Title,r=e.Gourl,l=e.Imgurl,i=e.id,n=e.Channelname;l&&(this.fileList=[{name:l,url:l}]),this.ruleForm={title:t,gourl:r,imgurl:l,id:i,channelname:n},console.log(this.ruleForm)}},methods:{beforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,l=e.size/1024/1024<10;return t||r||this.$message.error("上传图片只能是 JPG/PNG 格式!"),l||this.$message.error("上传图片大小不能超过 10MB!"),t||r&&l},handleSuccess:function(e){this.ruleForm.imgurl=e.filepath},handleError:function(e){this.$message.error(e.msg)},handleRemove:function(){this.ruleForm.imgurl="",this.fileList=[]},getdetailinfo:function(){return Object(o["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(r){var l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return t.loading=!0,e.next=4,Object(s["m"])(Object(n["a"])({},t.ruleForm));case 4:l=e.sent,200==l.status?(t.$message.success(l.msg),t.$router.go(-1)):t.$message.error(l.msg),t.loading=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},c=u,m=(r("5391"),r("2877")),g=Object(m["a"])(c,l,i,!1,null,"8e6b065e",null);t["default"]=g.exports},"7e0d":function(e,t,r){}}]);