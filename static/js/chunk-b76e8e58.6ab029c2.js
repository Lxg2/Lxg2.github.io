(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b76e8e58"],{"0aad":function(e,t,r){"use strict";r("b95f")},"9aab":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-box"},[r("el-form",{ref:"myform",staticClass:"my-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"历史沿革时间",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入历史沿革标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"历史沿革内容",prop:"content"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入历史沿革沿革内容"},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),r("el-form-item",{attrs:{label:"置顶/热门"}},[r("div",{staticStyle:{"margin-left":"10px"}},[r("el-checkbox-group",{model:{value:e.ruleForm.hotstr,callback:function(t){e.$set(e.ruleForm,"hotstr",t)},expression:"ruleForm.hotstr"}},[r("el-checkbox",{attrs:{label:"置顶",value:1}}),r("el-checkbox",{attrs:{label:"热门",value:2}})],1)],1)]),r("el-form-item",{attrs:{label:"是否显示"}},[r("div",{staticStyle:{"margin-left":"10px"}},[r("el-switch",{attrs:{"active-text":"显示","inactive-text":"隐藏"},model:{value:e.ruleForm.isshow,callback:function(t){e.$set(e.ruleForm,"isshow",t)},expression:"ruleForm.isshow"}})],1)]),r("el-form-item",{attrs:{label:"排序ID"}},[r("el-input",{attrs:{placeholder:"ID越小越靠前"},model:{value:e.ruleForm.sortid,callback:function(t){e.$set(e.ruleForm,"sortid",t)},expression:"ruleForm.sortid"}})],1),r("el-form-item",[r("div",{staticClass:"but-b"},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("myform")}}},[e._v("发布")])],1)])],1)],1)},a=[],i=r("5530"),l=r("c7eb"),n=r("1da1"),s=(r("a15b"),r("b8bc")),c=r("8256"),u=r("c24f"),m={components:{ImageUpload:s["a"],Tinymce:c["a"]},data:function(){var e=function(e,t,r){""===t||void 0===t?r(new Error("请上传封面")):r()};return{form:{},fileList:[],imgdialogVisible:!1,editflag:!1,validateImg:e,dialogImageUrl:"",containertext:"",ruleForm:{title:"",content:"",hotstr:[],categoryid:"",sortid:"",isshow:!0},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请填写内容",trigger:"change"}],categoryId:[{required:!0,message:"请选择所属类别",trigger:"change"}],imgurl:[{required:!0,trigger:"change",validator:e}]},options:[]}},created:function(){this.getselectlist()},mounted:function(){var e=this;Object(u["e"])({id:this.$route.query.id}).then((function(t){var r=t.datalist,o=r.Title,a=r.Content,i=r.Hotstr,l=r.Categoryid,n=r.Sortid,s=r.Isshow;e.ruleForm.title=o,e.editflag=!0,e.ruleForm.hotstr=i.split(","),e.ruleForm.categoryid=l,e.ruleForm.sortid=n,e.ruleForm.isshow=!!s,e.ruleForm.content=a}))},methods:{beforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,o=e.size/1024/1024<10;return t||r||this.$message.error("上传图片只能是 JPG/PNG 格式!"),o||this.$message.error("上传图片大小不能超过 10MB!"),t||r&&o},handleSuccess:function(e){this.ruleForm.imgurl=e.filepath},handleError:function(e){this.$message.error(e.msg)},handleRemove:function(){this.ruleForm.imgurl="",this.fileList=[]},getselectlist:function(){var e=this;return Object(n["a"])(Object(l["a"])().mark((function t(){var r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["j"])({channelname:e.$route.meta.channelname});case 2:r=t.sent,e.options=r.datalist;case 4:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(Object(l["a"])().mark((function e(r){var o,a,n,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return o=t.ruleForm,a=o.hotstr,n=o.isshow,t.ruleForm.hotstr=a.join(","),e.next=5,Object(u["n"])(Object(i["a"])(Object(i["a"])({},t.ruleForm),{},{id:t.$route.query.id,channelname:t.$route.meta.channelname,isshow:+n}));case 5:s=e.sent,200==s.status&&(t.$message.success(s.msg),t.$router.go(-1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},d=m,f=(r("0aad"),r("2877")),h=Object(f["a"])(d,o,a,!1,null,"855f2d3e",null);t["default"]=h.exports},b95f:function(e,t,r){}}]);