(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b381c08"],{"29ec":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-box"},[r("el-form",{ref:"myform",staticClass:"my-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"供需标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入供需标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"供需类型",prop:"supplytype"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择分类"},model:{value:e.ruleForm.supplytype,callback:function(t){e.$set(e.ruleForm,"supplytype",t)},expression:"ruleForm.supplytype"}},e._l(e.options2,(function(e){return r("el-option",{key:e.id,attrs:{label:e.Categorytitle,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"供需内容",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入供需信息"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),0===e.ruleForm.supplytype?r("el-form-item",{attrs:{label:"供应企业",prop:"communityname",rules:[{required:!0,message:"请输入供应企业",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.ruleForm.communityname,callback:function(t){e.$set(e.ruleForm,"communityname",t)},expression:"ruleForm.communityname"}})],1):e._e(),r("el-form-item",{attrs:{label:"联系人",prop:"communityusername",rules:[{required:!0,message:"请输入联系人",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.ruleForm.communityusername,callback:function(t){e.$set(e.ruleForm,"communityusername",t)},expression:"ruleForm.communityusername"}})],1),r("el-form-item",{attrs:{label:"联系方式",prop:"communityusermobile",rules:[{required:!0,message:"请输入联系方式",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.ruleForm.communityusermobile,callback:function(t){e.$set(e.ruleForm,"communityusermobile",t)},expression:"ruleForm.communityusermobile"}})],1),r("el-form-item",{attrs:{label:"置顶/热门"}},[r("div",{staticStyle:{"margin-left":"10px"}},[r("el-checkbox-group",{model:{value:e.ruleForm.hotstr,callback:function(t){e.$set(e.ruleForm,"hotstr",t)},expression:"ruleForm.hotstr"}},[r("el-checkbox",{attrs:{label:"置顶",value:1}}),r("el-checkbox",{attrs:{label:"热门",value:2}})],1)],1)]),r("el-form-item",{attrs:{label:"排序ID"}},[r("el-input",{attrs:{placeholder:"ID越小越靠前"},model:{value:e.ruleForm.sortid,callback:function(t){e.$set(e.ruleForm,"sortid",t)},expression:"ruleForm.sortid"}})],1),r("el-form-item",{attrs:{label:"是否显示"}},[r("div",{staticStyle:{"margin-left":"10px"}},[r("el-switch",{attrs:{"active-text":"显示","inactive-text":"隐藏"},model:{value:e.ruleForm.isshow,callback:function(t){e.$set(e.ruleForm,"isshow",t)},expression:"ruleForm.isshow"}})],1)]),r("el-form-item",{attrs:{label:"供需图片",prop:"filelist"}},[r("el-upload",{attrs:{action:e.$store.state.user.beseFile,"list-type":"picture-card","on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"file-list":e.fileList,headers:e.upheaders}},[r("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",height:"100%"},attrs:{slot:"trigger"},slot:"trigger"},[r("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"80px"}}),r("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"14px","margin-top":"10px"}},[e._v("添加封面")])])])],1),r("el-form-item",[r("div",{staticClass:"but-b"},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("myform")}}},[e._v("发布")])],1)])],1)],1)},l=[],s=r("c7eb"),a=r("5530"),o=r("1da1"),n=r("ade3"),u=(r("c740"),r("caad"),r("a15b"),r("d81d"),r("a434"),r("2532"),r("b8bc")),c=r("8256"),m=r("c24f"),p=r("5f87"),d={components:{ImageUpload:u["a"],Tinymce:c["a"]},data:function(){var e=function(e,t,r){console.log(t),""===t||void 0===t?r(new Error("请上传封面")):r()};return{options:[],options2:[{id:0,Categorytitle:"供应"},{id:1,Categorytitle:"需求"}],fileList:[],upheaders:{},loading:!1,imgdialogVisible:!1,validateImg:e,dialogImageUrl:"",inputVisible:!1,inputValue:"",ruleForm:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({communityusermobile:"",communityusername:"",title:"",remarks:"",communityname:""},"communityusername",""),"communityusermobile",""),"hotstr",[]),"sortid",""),"filelist",[]),"isshow",!0),"supplytype",""),rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],categoryid:[{required:!0,message:"请选择分类",trigger:"blur"}],supplytype:[{required:!0,message:"请选择类型",trigger:"blur"}],remarks:[{required:!0,message:"请填写内容",trigger:"change"}],filelist:[{required:!0,trigger:"change",validator:e}]}}},mounted:function(){this.upheaders={Authorization:Object(p["a"])()},this.getclasslist()},methods:{handleInputConfirm:function(){var e=this.inputValue;e&&(0!==this.ruleForm.dynamicTags.length?!this.ruleForm.dynamicTags.includes(e)&&this.ruleForm.dynamicTags.push(e):this.ruleForm.dynamicTags.push(e)),this.inputVisible=!1,this.inputValue=""},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},getclasslist:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["f"])(Object(a["a"])({channelname:"qiye"},{page:1,pageSize:10,keywords:""}));case 2:r=t.sent,e.options=r.datalist.datalist;case 4:case"end":return t.stop()}}),t)})))()},beforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,i=e.size/1024/1024<20;return t||r||this.$message.error("上传图片只能是 JPG/PNG 格式!"),i||this.$message.error("上传图片大小不能超过 20MB!"),t||r&&i},handleSuccess:function(e,t){this.ruleForm.filelist.push({filepath:e.filepath,uid:t.uid})},handleError:function(e){this.$message.error(e.msg)},handleRemove:function(e){var t=this.ruleForm.filelist.findIndex((function(t){return t.uid===e.uid}));this.ruleForm.filelist.splice(t,1)},submitForm:function(e){var t=this;return Object(o["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(o["a"])(Object(s["a"])().mark((function e(r){var i,l,o,n,u;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return t.loading=!0,i=t.ruleForm,l=i.isshow,o=i.hotstr,n=i.filelist,n=n.map((function(e){return e.filepath})).join(","),e.next=6,Object(m["r"])(Object(a["a"])(Object(a["a"])({},t.ruleForm),{},{filelist:n,isshow:+l,hotstr:o.join(","),channelname:t.$route.meta.channelname}));case 6:u=e.sent,200===u.status&&(t.$message.success(u.msg),t.$router.go(-1)),t.loading=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}}},f=d,b=(r("8866"),r("2877")),h=Object(b["a"])(f,i,l,!1,null,"2b98be7c",null);t["default"]=h.exports},"49e8":function(e,t,r){},8866:function(e,t,r){"use strict";r("49e8")}}]);