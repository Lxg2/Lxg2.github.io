(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-507a1944"],{"0390":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-box",staticStyle:{"padding-right":"20px"}},[r("el-form",{ref:"myform",staticClass:"my-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"街道概况",prop:"content",rules:[{required:!0,message:"请填写内容",trigger:"change"}]}},[r("Tinymce",{ref:"editor",attrs:{value:e.ruleForm.content,height:250},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),r("el-form-item",[r("div",{staticClass:"but-b"},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("myform")}}},[e._v("保存")])],1)])],1)],1)},a=[],i=r("5530"),s=r("c7eb"),o=r("1da1"),c=(r("c740"),r("d81d"),r("a434"),r("d3b7"),r("2ca0"),r("b8bc")),u=r("8256"),l=r("c24f"),m={components:{ImageUpload:c["a"],Tinymce:u["a"]},data:function(){var e=function(e,t,r){""===t||void 0===t?r(new Error("请上传封面")):r()};return{editflag:!1,fileList:[],upheaders:{},imgdialogVisible:!1,validateImg:e,dialogImageUrl:"",inputVisible:!1,containertext:"",inputValue:"",ruleForm:{content:""},rules:{title:[{required:!0,message:"请输入",trigger:"blur"}],categoryid:[{required:!0,message:"请选择",trigger:"blur"}],content:[{required:!0,message:"请填写内容",trigger:"change"}],filelist:[{required:!0,trigger:"change",validator:e}]}}},mounted:function(){var e=this;this.containertext="",Object(l["i"])({typename:this.$route.meta.serverid}).then((function(t){var r=t.datalist.Content;e.ruleForm.content=r,e.containertext=r,e.$nextTick((function(){e.$refs.editor.setContent(e.ruleForm.content)}))}))},methods:{beforeUploadvideo:function(e){var t=e.type.startsWith("video/");return!!t||(this.$message.error("请上传视频文件！"),!1)},videoHandleSuccess:function(e,t,r){200===e.status?this.ruleForm.title=e.filepath:this.$message.error(e.msg)},handleRemovevdeio:function(){this.ruleForm.title=""},beforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,n=e.size/1024/1024<10;return t||r||this.$message.error("上传图片只能是 JPG/PNG 格式!"),n||this.$message.error("上传图片大小不能超过 10MB!"),t||r&&n},handleSuccess:function(e,t,r){var n=this;200===e.status?r.every((function(e){return"success"==e.status}))&&r.map((function(e){e.response&&n.ruleForm.filelist.push({url:e.response.filepath,uid:e.uid})})):this.$message.error(e.msg)},handleError:function(e){this.$message.error(e.msg)},handleRemove:function(e){var t=this.ruleForm.filelist.findIndex((function(t){return t.uid===e.uid}));this.ruleForm.filelist.splice(t,1)},getselectlist:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,GetSelectCategory({channelname:e.$route.meta.channelname});case 2:r=t.sent,e.options=r.datalist;case 4:case"end":return t.stop()}}),t)})))()},getLatLng:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=null,!e.containertext){t.next=7;break}return t.next=4,Object(l["p"])(Object(i["a"])(Object(i["a"])({},e.ruleForm),{},{typename:e.$route.meta.serverid}));case 4:r=t.sent,t.next=11;break;case 7:return t.next=9,Object(l["l"])(Object(i["a"])(Object(i["a"])({},e.ruleForm),{},{typename:e.$route.meta.serverid}));case 9:r=t.sent,e.containertext=e.ruleForm.content;case 11:200==r.status&&e.$message.success(r.msg);case 12:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(Object(s["a"])().mark((function e(r){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r&&t.getLatLng();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},d=m,f=(r("931a"),r("2877")),g=Object(f["a"])(d,n,a,!1,null,"6fcb1762",null);t["default"]=g.exports},"8dd7":function(e,t,r){},"931a":function(e,t,r){"use strict";r("8dd7")}}]);