(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f0b685f"],{"0e97":function(e,t,r){"use strict";r("a5a3")},"9f2b":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-box"},[r("el-form",{ref:"myform",staticClass:"my-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"130px"}},[r("el-form-item",{attrs:{label:"分类标题",prop:"categorytitle"}},[r("el-input",{attrs:{placeholder:"请输入分类标题"},model:{value:e.ruleForm.categorytitle,callback:function(t){e.$set(e.ruleForm,"categorytitle",t)},expression:"ruleForm.categorytitle"}})],1),r("el-form-item",{attrs:{label:"是否显示"}},[r("div",{staticStyle:{"margin-left":"10px"}},[r("el-switch",{attrs:{"active-text":"显示","inactive-text":"隐藏"},model:{value:e.ruleForm.isshow,callback:function(t){e.$set(e.ruleForm,"isshow",t)},expression:"ruleForm.isshow"}})],1)]),r("el-form-item",{attrs:{label:"分类封面",prop:"imgurl"}},[r("el-upload",{attrs:{action:e.$store.state.user.beseFile,"list-type":"picture-card","on-success":e.handleSuccess,"on-error":e.handleError,"before-upload":e.beforeUpload,"on-remove":e.handleRemove,"file-list":e.fileList,headers:e.upheaders,limit:1}},[r("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",height:"100%"},attrs:{slot:"trigger"},slot:"trigger"},[r("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"80px"}}),r("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"14px","margin-top":"10px"}},[e._v("添加封面")])])])],1),r("el-form-item",[r("div",{staticClass:"but-b"},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("myform")}}},[e._v("修改")])],1)])],1)],1)},a=[],s=r("5530"),o=r("c7eb"),n=r("1da1"),l=r("b8bc"),c=r("8256"),u=r("c24f"),m=r("5f87"),f={components:{ImageUpload:l["a"],Tinymce:c["a"]},data:function(){var e=function(e,t,r){""===t||void 0===t?r(new Error("请上传封面")):r()};return{fileList:[],upheaders:{},imgdialogVisible:!1,validateImg:e,dialogImageUrl:"",ruleForm:{categorytitle:"",imgurl:"",isshow:!0},rules:{categorytitle:[{required:!0,message:"请输入分类标题",trigger:"blur"}]}}},created:function(){this.getinfofn()},mounted:function(){this.upheaders={Authorization:Object(m["a"])()}},methods:{getinfofn:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var r,i,a,s,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["g"])({id:e.$route.query.id});case 2:r=t.sent,i=r.datalist,a=i.Categorytitle,s=i.Isshow,n=i.Imgurl,e.ruleForm.categorytitle=a,e.ruleForm.isshow=!!s,e.ruleForm.imgurl=n,n&&(e.fileList=[{url:n}]);case 11:case"end":return t.stop()}}),t)})))()},handleAvatarSuccess:function(e,t){this.ruleForm.imgurl=e.filepath,this.fileList=[{url:imgurl}]},beforeUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,i=e.size/1024/1024<10;return t||r||this.$message.error("上传图片只能是 JPG/PNG 格式!"),i||this.$message.error("上传图片大小不能超过 10MB!"),t||r&&i},handleSuccess:function(e){this.ruleForm.imgurl=e.filepath},handleError:function(e){this.$message.error(e.msg)},handleRemove:function(){this.ruleForm.imgurl="",this.fileList=[]},submitForm:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=Object(n["a"])(Object(o["a"])().mark((function e(r){var i,a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return i=t.ruleForm.isshow,e.next=4,Object(u["o"])(Object(s["a"])(Object(s["a"])({},t.ruleForm),{},{isshow:+i,channelname:t.$route.meta.channelname,id:t.$route.query.id}));case 4:a=e.sent,200===a.status&&(t.$message.success(a.msg),t.$router.go(-1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}}},p=f,h=(r("0e97"),r("2877")),d=Object(h["a"])(p,i,a,!1,null,"4aeba13f",null);t["default"]=d.exports},a5a3:function(e,t,r){}}]);